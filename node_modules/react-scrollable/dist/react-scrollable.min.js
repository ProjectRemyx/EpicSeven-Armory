!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports["react-scrollable"]=t(require("react"),require("react-dom")):e["react-scrollable"]=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},u=function(){function e(e,t){for(var r=0;t.length>r;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=r(3),c=o(a),f=r(10),p=o(f),d=r(2),h=o(d),v=r(6),y=o(v),b=r(8),w=function(e){function t(){var e;n(this,t);for(var r=arguments.length,o=Array(r),l=0;r>l;l++)o[l]=arguments[l];var s=i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return s.state={viewPortHeight:s._viewPortHeight({isBodyScroll:!0}),scrollTop:s._scrollTop({isBodyScroll:!0})},s.onScroll=y.default(function(){return s._onScroll(s.props)},50),s.onResize=function(){return s._onResize()},s.debouncedUpdateSize=h.default(function(){return s._updateSize(s.props)},100),s}return l(t,e),u(t,[{key:"_onScroll",value:function(e){this.setState({scrollTop:this._scrollTop(e)})}},{key:"_onResize",value:function(){this.debouncedUpdateSize()}},{key:"_updateSize",value:function(e){this.setState({viewPortHeight:this._viewPortHeight(e)})}},{key:"_scrollTop",value:function(e){var t=e.isBodyScroll;return t?window.pageYOffset:p.default.findDOMNode(this.refs.container).scrollTop}},{key:"_viewPortHeight",value:function(e){var t=e.isBodyScroll;return t?window.innerHeight:p.default.findDOMNode(this.refs.container).offsetHeight}},{key:"componentDidMount",value:function(){var e=this.props.isBodyScroll;e?window.addEventListener("scroll",this.onScroll):(p.default.findDOMNode(this.refs.container).addEventListener("scroll",this.onScroll),this.setState({viewPortHeight:this._viewPortHeight(this.props),scrollTop:this._scrollTop(this.props)})),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onScroll),p.default.findDOMNode(this.refs.container).removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.isBodyScroll!==this.props.isBodyScroll&&(e.isBodyScroll?(p.default.findDOMNode(this.refs.container).removeEventListener("scroll",this.onScroll),window.addEventListener("scroll",this.onScroll),this.setState({viewPortHeight:this._viewPortHeight(e),scrollTop:this._scrollTop(e)})):(window.removeEventListener("scroll",this.onScroll),p.default.findDOMNode(this.refs.container).addEventListener("scroll",this.onScroll),this.setState({scrollTop:0},function(){return t.setState({viewPortHeight:t._viewPortHeight(e)})})))}},{key:"render",value:function(){var e=s({},this.props,this.state);return c.default.createElement(b.Scroller,s({},e,{ref:"container"}),this.props.children)}},{key:"scrollToRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,r=this.refs.container.getRowOffsetTop(e)-(t?this.state.viewPortHeight/2:0);this.props.isBodyScroll?window.scrollTo(0,r):p.default.findDOMNode(this.refs.container).scrollTop=r}}]),t}(a.Component);t.default=w},function(e,t){"use strict";function r(e){var t=void 0===e?"undefined":o(e);return!!e&&("object"==t||"function"==t)}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.default=r},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){function o(){m&&clearTimeout(m),v&&clearTimeout(v),_=0,h=v=w=m=g=void 0}function n(t,r){r&&clearTimeout(r),v=m=g=void 0,t&&(_=u.default(),y=e.apply(w,h),m||v||(h=w=void 0))}function i(){var e=t-(u.default()-b);0>=e||e>t?n(g,v):m=setTimeout(i,e)}function s(){return(m&&g||v&&P)&&(y=e.apply(w,h)),o(),y}function a(){n(P,m)}function d(){if(h=arguments,b=u.default(),w=this,g=P&&(m||!O),S===!1)var r=O&&!m;else{_||v||O||(_=b);var o=S-(b-_),n=(0>=o||o>S)&&(O||v);n?(v&&(v=clearTimeout(v)),_=b,y=e.apply(w,h)):v||(v=setTimeout(a,o))}return n&&m?m=clearTimeout(m):m||t===S||(m=setTimeout(i,t)),r&&(n=!0,y=e.apply(w,h)),!n||m||v||(h=w=void 0),y}var h,v,y,b,w,m,g,_=0,O=!1,S=!1,P=!0;if("function"!=typeof e)throw new TypeError(f);return t=c.default(t)||0,l.default(r)&&(O=!!r.leading,S="maxWait"in r&&p(c.default(r.maxWait)||0,t),P="trailing"in r?!!r.trailing:P),d.cancel=o,d.flush=s,d}Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),l=o(i),s=r(5),u=o(s),a=r(7),c=o(a),f="Expected a function",p=Math.max;t.default=n},function(t){t.exports=e},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=l.default(e)?c.call(e):"";return t==s||t==u}Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),l=o(i),s="[object Function]",u="[object GeneratorFunction]",a=Object.prototype,c=a.toString;t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Date.now;t.default=r},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){var o=!0,n=!0;if("function"!=typeof e)throw new TypeError(a);return u.default(r)&&(o="leading"in r?!!r.leading:o,n="trailing"in r?!!r.trailing:n),l.default(e,t,{leading:o,maxWait:t,trailing:n})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),l=o(i),s=r(1),u=o(s),a="Expected a function";t.default=n},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(u.default(e)){var t=l.default(e.valueOf)?e.valueOf():e;e=u.default(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var r=p.test(e);return r||d.test(e)?h(e.slice(2),r?2:8):f.test(e)?a:+e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),l=o(i),s=r(1),u=o(s),a=NaN,c=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt;t.default=n},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Scroller=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},u=function(){function e(e,t){var r=[],o=!0,n=!1,i=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done)&&(r.push(l.value),!t||r.length!==t);o=!0);}catch(u){n=!0,i=u}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;t.length>r;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),c=r(3),f=o(c),p=r(9),d=Math.max,h=Math.min,v=Math.ceil,y=Math.floor,b=function(e){return"function"==typeof e},w=function(e,t,r){return e.push(r>0?e[r-1]+t:t),e},m=function(e){return e.reduce(w,[])},g=t.Scroller=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),a(t,[{key:"_cacheRowsHeightsAndOffsets",value:function(e){var t=e.rowHeight,r=e.size;b(t)&&(this.rows=Array.from(Array(r),function(e,r){return t(r)}),this.rowOffsets=m(this.rows))}},{key:"_calcTopIndex",value:function(){var e=this.props,t=e.size,r=e.rowHeight,o=e.viewPortHeight,n=this._calcScrollTop(),i=void 0;if(b(r)){this.rowOffsets[t-1]>n||(n=this.rowOffsets[t-1]-o);var l=!0,s=!1,a=void 0;try{for(var c,f=this.rowOffsets.entries()[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=u(c.value,2),d=p[0],v=p[1];if(v>n){i=d;break}}}catch(w){s=!0,a=w}finally{try{!l&&f.return&&f.return()}finally{if(s)throw a}}return i}return h(y(n/r),t)}},{key:"_calcScrollTop",value:function(){var e=this.props,t=e.isBodyScroll,r=e.tableStartOffset,o=e.scrollTop;return t?d(o-r,0):o}},{key:"componentWillMount",value:function(){this._cacheRowsHeightsAndOffsets(this.props)}},{key:"shouldComponentUpdate",value:function(e){return!p.shallowEqual(this.props,e)}},{key:"componentWillReceiveProps",value:function(e){this._cacheRowsHeightsAndOffsets(e)}},{key:"render",value:function(){var e={overflow:"auto",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",WebkitTransform:"translateZ(0)",transform:"translateZ(0)",WebkitOverflowScrolling:"touch"},t=this.props,r=t.className,o=t.style,n=void 0===o?{}:o,i=s({},e,n),l=this._calcTopIndex(),u=this._calcFromIndex(l),a=this._calcToIndex(l),c=this._calcLastVisibleIndex(l),p=[l,c];return f.default.createElement("div",{className:r,style:i},f.default.createElement("div",{style:{height:this._topPlaceholderHeight(u)},className:"Scroller__TopPlaceholder"}),this._renderBody(u,a,p),f.default.createElement("div",{style:{height:this._bottomPlaceholderHeight(this.props.size,a)},className:"Scroller__BottomPlaceholder"}))}},{key:"_renderBody",value:function(e,t,r){return c.Children.map(this.props.children,function(o){return c.cloneElement(o,{from:e,to:t,visibleRowsRange:r},o.props.children)})}},{key:"_calcFromIndex",value:function(e){var t=this.props,r=t.buffer,o=t.viewPortHeight,n=t.rowHeight,i=this._calcScrollTop(),l=o*r;if(b(n)){for(;e>0&&l>0;)l-=this.rows[--e];return e}return d(y((i-l)/n),0)}},{key:"_calcToIndex",value:function(e){var t=this.props,r=t.size,o=t.buffer,n=t.viewPortHeight,i=t.rowHeight,l=this._calcScrollTop(),s=n+n*o;if(b(i)){for(;r>e&&s>0;)s-=this.rows[e++];return e}return h(v((l+s)/i),r)}},{key:"_calcLastVisibleIndex",value:function(e){var t=this.props,r=t.size,o=t.viewPortHeight,n=t.rowHeight,i=this._calcScrollTop(),l=o;if(b(n)){for(;r>e&&l>0;)l-=this.rows[e++];return e}return h(v((i+l)/n),r)}},{key:"_getRowOffset",value:function(e){var t=this.props.rowHeight;return b(t)?this.rowOffsets[e]:t*(e+1)}},{key:"_topPlaceholderHeight",value:function(e){return 0==e?0:this._getRowOffset(e-1)}},{key:"_bottomPlaceholderHeight",value:function(e,t){return this._getRowOffset(e-1)-this._getRowOffset(t-1)}},{key:"getRowOffsetTop",value:function(e){var t=0===e?0:this._getRowOffset(e-1);return this.props.isBodyScroll?t+this.props.tableStartOffset:t}}]),t}(c.Component);g.propTypes={rowHeight:c.PropTypes.oneOfType([c.PropTypes.number,c.PropTypes.func]).isRequired,size:c.PropTypes.number.isRequired,scrollTop:c.PropTypes.number.isRequired,viewPortHeight:c.PropTypes.number.isRequired,isBodyScroll:c.PropTypes.bool.isRequired,tableStartOffset:c.PropTypes.number,buffer:c.PropTypes.number},g.defaultProps={tableStartOffset:0,buffer:1,isBodyScroll:!0}},function(e,t){"use strict";function r(e,t){if(e===t)return!0;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=0;r.length>i;i++)if(!o.call(t,r[i])||e[r[i]]!==t[r[i]])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.shallowEqual=r;var o=Object.prototype.hasOwnProperty},function(e){e.exports=t}])});